(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/update"],{2823:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("b86b"),d=n("73ad"),i={data:function(){return{type:0,phone:null,codes:{state:!0,add:!0,text:"发送验证码",time:"60秒"},form:{phone:null,code:null,pwd:null,pwdu:null,pwds:null}}},onLoad:function(t){if(t.type){t.phone&&(this.phone=t.phone);var e=parseFloat(t.type);this.type=e,this.upType(e)}},methods:{onChange:function(t){var e=this.form,n=t.target.id,o=t.detail,d=/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFF]/g;"phone"===n?e.phone=o.replace(d,""):"pwd"===n?e.pwd=o.replace(d,""):"pwds"===n?e.pwds=o.replace(d,""):"pwdu"===n?e.pwdu=o.replace(d,""):"code"===n&&(e.code=parseFloat(o.replace(d,"")))},upType:function(e){1===e?t.setNavigationBarTitle({title:"请填写新手机号码"}):2===e?t.setNavigationBarTitle({title:"设置登陆密码"}):3===e&&t.setNavigationBarTitle({title:"更改登陆密码"})},onSubmit:function(){var e,n=this.form,i=this.type;if(1===i){if(!n.phone)return this.forbiddenToast("手机未填写"),!1;if(11!==n.phone.length)return this.forbiddenToast("手机号错误"),!1;e={phone:n.phone,code:n.code}}else if(2===i){if(!n.pwd)return this.forbiddenToast("密码未填写"),!1;if(!n.pwds)return this.forbiddenToast("在一次输入密码"),!1;if(n.pwd!==n.pwds)return this.forbiddenToast("输入密码不一致"),!1;e={pwd:n.pwd}}else if(3===i){if(!n.pwdu)return this.forbiddenToast("旧密码未填写"),!1;if(!n.pwd)return this.forbiddenToast("新密码未填写"),!1;if(!n.pwds)return this.forbiddenToast("在一次输入密码"),!1;if(n.pwd!==n.pwds)return this.forbiddenToast("输入密码不一致"),!1;e={pwdu:n.pwdu,pwd:n.pwd}}(0,o.upMember)(e).then(function(e){var n=e.data;2e4===e.code?n.update?((0,d.$wuxToast)().show({type:"success",text:"保存成功"}),setTimeout(function(){t.navigateBack()},1e3)):1===i?(0,d.$wuxToast)().show({type:"forbidden",text:"手机或验证码错误"}):2===i?(0,d.$wuxToast)().show({type:"forbidden",text:"请稍后重试"}):3===i&&(0,d.$wuxToast)().show({type:"forbidden",text:"旧密码错误"}):(0,d.$wuxToast)().show({type:"forbidden",text:"请求异常"})})},forbiddenToast:function(t){(0,d.$wuxToast)().show({type:"forbidden",text:t})},addCode:function(){this.codes.add?(this.codes.add=!1,this.vcode()):(0,d.$wuxToast)().show({type:"forbidden",text:"验证码已发送"})},getSecurityCode:function(){var t=this.form;(0,o.getSecurityCode)({phone:t.phone}).then(function(t){var e=t.data;2e4===e.code&&e.state&&(0,d.$wuxToast)().show({type:"success",text:"验证码已发送"})})},vcode:function(){var t=this.form;if(!t.phone)return this.forbiddenToast("手机未填写"),!1;if(this.codes.state){this.getSecurityCode();var e=this;this.codes.state=!1,new d.$wuxCountDown({date:+new Date+6e4,onEnd:function(){e.codes.state=!0,e.codes.add=!0,e.codes.text="重新获取",e.codes.time="60秒"},render:function(t){var n=this.leadingZeros(t.sec,2)+" 秒 ";0!==t.sec&&(e.codes.time=n)}})}},Back:function(){t.navigateBack()}}};e.default=i}).call(this,n("543d")["default"])},"2d46":function(t,e,n){"use strict";(function(t){n("dc02"),n("921b");o(n("66fd"));var e=o(n("7ab7"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"7ab7":function(t,e,n){"use strict";n.r(e);var o=n("a500"),d=n("996d");for(var i in d)"default"!==i&&function(t){n.d(e,t,function(){return d[t]})}(i);n("859b");var a=n("2877"),s=Object(a["a"])(d["default"],o["a"],o["b"],!1,null,"3c380989",null);e["default"]=s.exports},"859b":function(t,e,n){"use strict";var o=n("edd9"),d=n.n(o);d.a},"996d":function(t,e,n){"use strict";n.r(e);var o=n("2823"),d=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=d.a},a500:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},d=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return d})},edd9:function(t,e,n){}},[["2d46","common/runtime","common/vendor"]]]);