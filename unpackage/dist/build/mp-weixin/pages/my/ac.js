(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/ac"],{1823:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})},"5fd8":function(t,e,n){},be64:function(t,e,n){"use strict";n.r(e);var a=n("1823"),o=n("c4b9");for(var u in o)"default"!==u&&function(t){n.d(e,t,function(){return o[t]})}(u);n("faf0");var i=n("2877"),r=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,"5d9ad0d5",null);e["default"]=r.exports},c4b9:function(t,e,n){"use strict";n.r(e);var a=n("f834"),o=n.n(a);for(var u in a)"default"!==u&&function(t){n.d(e,t,function(){return a[t]})}(u);e["default"]=o.a},eb8f:function(t,e,n){"use strict";(function(t){n("dc02"),n("921b");a(n("66fd"));var e=a(n("be64"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},f834:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("b86b"),o=n("73ad"),u={data:function(){return{fileList:[],url:"https://gw-1300511476.cos.ap-guangzhou.myqcloud.com/",cos:null,ac:0,form:{idname:null,idnumber:null,acUrl:null}}},onLoad:function(){this.getMemberAc()},methods:{getMemberAc:function(){var t=this;(0,a.getMemberAc)().then(function(e){var n=e.data;if(2e4===e.code){t.form=n.detail.info,t.ac=n.detail.ac,t.fileList=[{uid:1,status:"done",url:""+n.detail.info.acUrl}];var a=t.$store.getters.member;n.detail.ac>1&&(a.ac=n.detail.ac,t.$store.commit("SET_MEMBER",a))}else(0,o.$wuxToast)().show({type:"forbidden",text:"请求异常"})})},stsToken:function(){var t=this;(0,a.stsToken)().then(function(e){var n=e.data;if(2e4===e.code){var a=new Date,u=a.getFullYear(),i=a.getMonth()+1,r=a.getDate(),c=Math.random().toString(36).substr(2,6)+".png",d="ac/"+u+"/"+i+"/"+r+"/";t.cos=n,t.cos.key=d+c,e.url&&(t.url=e.url)}else(0,o.$wuxToast)().show({type:"forbidden",text:"请求异常"})})},onChange:function(t){var e=this.form,n=t.target.id,a=t.detail,o=/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFF]/g;"idname"===n?e.idname=a.replace(o,""):"idnumber"===n&&(e.idnumber=a.replace(o,""))},uploadSuccess:function(){var t="https://gw-1300511476.cos.ap-guangzhou.myqcloud.com/"+this.cos.key;this.form.acUrl=t},removeFile:function(){this.fileList=[]},onSubmit:function(){var e=this.form;if(!e.idname)return this.forbiddenToast("真实姓名未填写"),!1;if(!e.idnumber)return this.forbiddenToast("身份证未填写"),!1;if(!e.acUrl)return this.forbiddenToast("退伍证明未上传"),!1;var n=Object.assign({},e.idname?{idname:e.idname}:{},e.idnumber?{idnumber:e.idnumber}:{},e.acUrl?{acUrl:e.acUrl}:{});(0,a.updateMemberAc)(n).then(function(e){var n=e.data;2e4===e.code?n.update?((0,o.$wuxToast)().show({type:"success",text:"已提交"}),setTimeout(function(){t.navigateBack()},1e3)):(0,o.$wuxToast)().show({type:"forbidden",text:"提交失败"}):(0,o.$wuxToast)().show({type:"forbidden",text:"请求异常"})})},forbiddenToast:function(t){(0,o.$wuxToast)().show({type:"forbidden",text:t})},Back:function(){t.navigateBack()}}};e.default=u}).call(this,n("543d")["default"])},faf0:function(t,e,n){"use strict";var a=n("5fd8"),o=n.n(a);o.a}},[["eb8f","common/runtime","common/vendor"]]]);