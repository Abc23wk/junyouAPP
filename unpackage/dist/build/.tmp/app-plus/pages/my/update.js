(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/update"],{2823:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("b86b"),d=n("73ad"),i={data:function(){return{type:0,phone:null,codes:{state:!0,add:!0,text:"发送验证码",time:"60秒"},form:{phone:null,code:null,pwd:null,pwdu:null,pwds:null}}},onLoad:function(e){if(e.type){e.phone&&(this.phone=e.phone);var t=parseFloat(e.type);this.type=t,this.upType(t)}},methods:{onChange:function(e){var t=this.form,n=e.target.id,o=e.detail,d=/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFF]/g;"phone"===n?t.phone=o.replace(d,""):"pwd"===n?t.pwd=o.replace(d,""):"pwds"===n?t.pwds=o.replace(d,""):"pwdu"===n?t.pwdu=o.replace(d,""):"code"===n&&(t.code=parseFloat(o.replace(d,"")))},upType:function(t){1===t?e.setNavigationBarTitle({title:"请填写新手机号码"}):2===t?e.setNavigationBarTitle({title:"设置登陆密码"}):3===t&&e.setNavigationBarTitle({title:"更改登陆密码"})},onSubmit:function(){var t=this;setTimeout(function(){var n,i=t.form,a=t.type;if(1===a){if(!i.phone)return t.forbiddenToast("手机未填写"),!1;if(11!==i.phone.length)return t.forbiddenToast("手机号错误"),!1;n={phone:i.phone,code:i.code}}else if(2===a){if(!i.pwd)return t.forbiddenToast("密码未填写"),!1;if(!i.pwds)return t.forbiddenToast("在一次输入密码"),!1;if(i.pwd!==i.pwds)return t.forbiddenToast("输入密码不一致"),!1;n={pwd:i.pwd}}else if(3===a){if(!i.pwdu)return t.forbiddenToast("旧密码未填写"),!1;if(!i.pwd)return t.forbiddenToast("新密码未填写"),!1;if(!i.pwds)return t.forbiddenToast("在一次输入密码"),!1;if(i.pwd!==i.pwds)return t.forbiddenToast("输入密码不一致"),!1;n={pwdu:i.pwdu,pwd:i.pwd}}(0,o.upMember)(n).then(function(t){var n=t.data;2e4===t.code?n.update?((0,d.$wuxToast)().show({type:"success",text:"保存成功"}),setTimeout(function(){e.navigateBack()},1e3)):1===a?(0,d.$wuxToast)().show({type:"forbidden",text:"手机或验证码错误"}):2===a?(0,d.$wuxToast)().show({type:"forbidden",text:"请稍后重试"}):3===a&&(0,d.$wuxToast)().show({type:"forbidden",text:"旧密码错误"}):(0,d.$wuxToast)().show({type:"forbidden",text:"请求异常"})})},500)},forbiddenToast:function(e){(0,d.$wuxToast)().show({type:"forbidden",text:e})},addCode:function(){this.codes.add?(this.codes.add=!1,this.vcode()):(0,d.$wuxToast)().show({type:"forbidden",text:"验证码已发送"})},getSecurityCode:function(){var e=this.form;(0,o.getSecurityCode)({phone:e.phone}).then(function(e){var t=e.data;2e4===t.code&&t.state&&(0,d.$wuxToast)().show({type:"success",text:"验证码已发送"})})},vcode:function(){var e=this.form;if(!e.phone)return this.forbiddenToast("手机未填写"),!1;if(this.codes.state){this.getSecurityCode();var t=this;this.codes.state=!1,new d.$wuxCountDown({date:+new Date+6e4,onEnd:function(){t.codes.state=!0,t.codes.add=!0,t.codes.text="重新获取",t.codes.time="60秒"},render:function(e){var n=this.leadingZeros(e.sec,2)+" 秒 ";0!==e.sec&&(t.codes.time=n)}})}},Back:function(){e.navigateBack()}}};t.default=i}).call(this,n("6e42")["default"])},"2d46":function(e,t,n){"use strict";(function(e){n("dc02"),n("921b");o(n("66fd"));var t=o(n("7ab7"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"377e":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},d=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return d})},"7ab7":function(e,t,n){"use strict";n.r(t);var o=n("377e"),d=n("996d");for(var i in d)"default"!==i&&function(e){n.d(t,e,function(){return d[e]})}(i);n("eed0");var a=n("2877"),u=Object(a["a"])(d["default"],o["a"],o["b"],!1,null,"44d0dce3",null);t["default"]=u.exports},"996d":function(e,t,n){"use strict";n.r(t);var o=n("2823"),d=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);t["default"]=d.a},eed0:function(e,t,n){"use strict";var o=n("eede"),d=n.n(o);d.a},eede:function(e,t,n){}},[["2d46","common/runtime","common/vendor"]]]);